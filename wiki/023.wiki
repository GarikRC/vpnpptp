#summary Возможности версии 0.2.3

В версии vpnpptp 0.2.3 реализовано:

1) конфигуратор проверяет поддержку вызовов mii-tool сетевой картой, и в случае если она их не поддерживает, и еще не существует файл /opt/vpnpptp/config, то конфигуратор самостоятельно включает опцию "Не контролировать state сетевого кабеля",

2) настроен многократный, ранее запрещенный, запуск модуля ponoff - новый запущенный экземпляр программы убивает предыдущий экземпляр, наследует все свойства и текущее состояние предыдущего экземпляра, после этого в процессах будет находиться лишь один модуль ponoff с pid нового экземпляра, то есть с точки зрения пользователя если многократно запускать ponoff, то визуально ничего не произойдет, изменится лишь pid и кратковременное пропадание иконки из трея и быстрое ее появление, но при этом будет корректно работать графический автозапуск интернета при старте системы при переключении между пользователями с таким автозапуском ponoff, а также вновь запущенный ponoff поудаляет, если вдруг таковые будут, подвисшие предыдущие экземпляры, посылая им сигнал kill -9,

3) команда запуска sudo /opt/vpnpptp/ponoff изменена на xsudo /opt/vpnpptp/ponoff, команда запуска sudo /opt/vpnpptp/vpnpptp изменена на xsudo /opt/vpnpptp/vpnpptp; если не установлен пакет xsudo, то конфигуратор vpnpptp выполнит сам все действия, выполняемые пакетом xsudo,

4) исправлено создание иконки на Рабочем столе,

5) существенно улучшена работа программы с DNS, полный отказ от использования /etc/resolv.conf.old; смысл улучшений был основан на идее о том, что конфигуратор vpnpptp создает текущий снимок сети, и чтобы модуль ponoff наиболее полно руководствовался этим снимком сети; в этот снимок сети было добавлено текущее состояние DNS в момент конфигурирования и сохранено в виде файла /opt/vpnpptp/resolv.conf; таким образом модуль ponoff до установления VPN приводит состояние DNS к состоянию, которое было в момент конфигурирования соединения (при необходимости как и прежде поднимает также предварительно сетевой интерфейс, на котором было настроено VPN), а при выходе без аварии сеть возвращается к сетевому интерфейсу, на котором было сконфигурировано VPN, и к DNS, на которых было сконфигурировано VPN; прежний механизм возврата к текущим системным DNS, которые были до поднятия VPN, таким образом был отменен, так как это часто мусор,

6) во многих дистрибутивах, в которых используется ifup, в частности в Mandriva и в ее аналогах, соединение теперь будет устанавливаться еще быстрее, выход без аварии станет еще быстрее - это все следствия введения долгожданного улучшенного механизма работы с DNS, при котором тормозной ifup более не нужен, и он теперь реже используется, и испольуется не для целей работы с DNS; если включить блокирование вывода всплывающих сообщений из трея, то будет еще быстрее, так как на вывод сообщений тратится время,

7) в Mandriva и в ее аналоги в этой версии программы было перенесено путем закономерного обобщения всё лучшее, чего удалось достичь проекту, работая с другими дистрибутивами,

8) полный отказ в модуле ponoff от команды resolvconf -u, так как не во всех дистрибутивах она есть, и она потеряла актуальность в связи переводом модуля ponoff на улучшенную автономную работу с DNS; resolvconf -u испольуется теперь лишь однократно в конфигураторе в PCLinuxOS,

9) NetApplet станет реже сигнализировать об изменениях в сети, выводя кучу балунов, а если не требуется получать маршруты через DHCP, то NetApplet почти совсем не будет сигнализировать, перекрытие сообщений NetApplet и ponoff, следовательно, было максимально устранено.

Примечания:

Введение механизма улучшенной работы с DNS стало возможно когда удалось побороть многочисленные default, если сетевых интерфейсов в системе более одного, исправить многократное выполнение скриптов поднятия и опускания на однократное.

В разных дистрибутивах разные механизмы формирования /etc/resolv.conf, подстраиваться под эти механизмы неэффективно для проекта, проект не должен зависеть от таких особенностей дистрибутивов, он должен продолжать становиться как можно более автономным. На данный момент он достаточно автономный, и его автономия в будущем будет лишь усиливаться.

В программу заложена база для дальнейшего развития дистрибутива Mandriva и его аналогов, основанная на допущении, что в новых версиях дистрибутива получением маршрутов через DHCP будет заниматься сам дистрибутив.

Скорость работы модуля ponoff для всех поддерживаемых дистрибутивов стала сравнима со скоростью его работы в Ubuntu.

Эта версия программы сделана для Mandriva и ее аналогов. Для других дистрибутивов заложенные новые механизмы работы с DNS будут переноситься постепенно в следующих версиях.
