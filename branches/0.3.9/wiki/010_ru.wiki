#summary Возможности версии 0.1.0

В версии vpnpptp 0.1.0 реализовано:

1) оптимизирован и улучшен алгоритм программной маршрутизации vpn-сервера для случая когда remote ip adress совпадает с ip-адресом самого vpn-сервера,

2) в конфигураторе добавлена опция разрешения пользователям конфигурировать соединение, которую можно будет выбрать если установлен пакет sudo, иначе будет предложено его установить, и до тех пор пока пакет sudo не будет установлен, эту опцию выбрать будет нельзя; конфигуратор реагирует на установку пакета sudo немедленно и не требует перезапуска конфигуратора,

3) переделан алгоритм работы с /etc/sudoers,

4) при выборе в конфигураторе опции разрешения пользователям управлять соединением разрешен запуск ponoff без пароля не только через иконку на рабочем столе, но и через меню запуска приложений,

5) в конфигураторе добавлена опция автозапуска интернета при старте системы в графике, которую можно будет выбрать если установлен пакет sudo аналогично п.2 (см. выше), а также при одновременном выборе опции разрешения пользователям управлять подключением; эта возможность реализована через помещение ярлыка ponoff в ~/.config/autostart,

6) в конфигураторе добавлена опция автозапуска интернета при старте системы демоном pppd; при выборе этой опции настраивается файл /etc/rc.d/rc.local; при выборе этой возможности также будет настроено через /etc/rc.d/rc.local получение маршрутов через dhcp (если оно будет выбрано), а также будет предложено воспользоваться опцией реализации реконнекта, встроенным в демон pppd методом,

7) опция автозапуска интернета при старте системы в графике и опция автозапуска интернета при старте системы демоном pppd являются взаимоисключающими, конфигуратор это проверяет и корректирует,

8) в конфигураторе добавлена опция, позволяющая запустить VPN PPTP не как дефолтное, а в фоне; в этом режиме скрипт /etc/ppp/ip-up.d/ip-up создается пустым, кроме того модуль ponoff сам способен запустить VPN PPTP в фоне, если этого по каким-то причинам не произошло; в этом режиме интернет не проверяется,

9) в конфигураторе добавлена проверка при старте наличия дефолтного шлюза и если его нет, то сеть перезапускается,

10) установлены права chmod 600 на /opt/vpnpptp/config, так как изменение этого файла означает право на конфигурирование соединения.

Примечание:

Как только соединение ppp0 установилось есть возможность узнать remote ip adress и сравнить его с данными базы знаний программы обо всех ip-адресах vpn-сервера, и если remote ip adress совпадает с ip-адресом самого vpn-сервера, то корректируется скрипт /etc/ppp/ip-up, в который заносится строчка route add -host $5 gw шлюз_локальной сети dev сетевой_интерфейс, и после этого при всех последующих соединениях программная маршрутизация vpn-сервера считается выполненной, и соединение устанавливается мгновенно, а необходимость ведения базы знаний программы обо всех ip-адресах vpn-сервера для этого рассмотренного случая отпадает, и она удаляется модулем ponoff. При конфигурировании (переконфигурировании) считается, что remote ip adress не совпадает с ip-адресом самого vpn-сервера - и задача доказать иное возлагается на модуль ponoff в режиме программного добавления маршрута к vpn-серверу.